!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).ClassTransformer={})}(this,(function(t){"use strict";var e,n,r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};
/*! *****************************************************************************
	Copyright (C) Microsoft. All rights reserved.
	Licensed under the Apache License, Version 2.0 (the "License"); you may not use
	this file except in compliance with the License. You may obtain a copy of the
	License at http://www.apache.org/licenses/LICENSE-2.0

	THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
	KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
	WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
	MERCHANTABLITY OR NON-INFRINGEMENT.

	See the Apache Version 2.0 License for specific language governing permissions
	and limitations under the License.
	***************************************************************************** */!function(t){!function(e){var n="object"==typeof r?r:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),o=i(t);function i(t,e){return function(n,r){"function"!=typeof t[n]&&Object.defineProperty(t,n,{configurable:!0,writable:!0,value:r}),e&&e(n,r)}}void 0===n.Reflect?n.Reflect=t:o=i(n.Reflect,o),function(t){var e=Object.prototype.hasOwnProperty,n="function"==typeof Symbol,r=n&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",o=n&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",i="function"==typeof Object.create,a={__proto__:[]}instanceof Array,s=!i&&!a,u={create:i?function(){return rt(Object.create(null))}:a?function(){return rt({__proto__:null})}:function(){return rt({})},has:s?function(t,n){return e.call(t,n)}:function(t,e){return e in t},get:s?function(t,n){return e.call(t,n)?t[n]:void 0}:function(t,e){return t[e]}},p=Object.getPrototypeOf(Function),f="object"==typeof process&&process.env&&"true"===process.env.REFLECT_METADATA_USE_MAP_POLYFILL,c=f||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?tt():Map,y=f||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?et():Set,l=new(f||"function"!=typeof WeakMap?nt():WeakMap);function d(t,e,n,r){if(j(n)){if(!G(t))throw new TypeError;if(!W(e))throw new TypeError;return w(t,e)}if(!G(t))throw new TypeError;if(!z(e))throw new TypeError;if(!z(r)&&!j(r)&&!F(r))throw new TypeError;return F(r)&&(r=void 0),O(t,e,n=U(n),r)}function h(t,e){function n(n,r){if(!z(n))throw new TypeError;if(!j(r)&&!Y(r))throw new TypeError;E(t,e,n,r)}return n}function v(t,e,n,r){if(!z(n))throw new TypeError;return j(r)||(r=U(r)),E(t,e,n,r)}function T(t,e,n){if(!z(e))throw new TypeError;return j(n)||(n=U(n)),C(t,e,n)}function _(t,e,n){if(!z(e))throw new TypeError;return j(n)||(n=U(n)),L(t,e,n)}function m(t,e,n){if(!z(e))throw new TypeError;return j(n)||(n=U(n)),b(t,e,n)}function g(t,e,n){if(!z(e))throw new TypeError;return j(n)||(n=U(n)),P(t,e,n)}function S(t,e){if(!z(t))throw new TypeError;return j(e)||(e=U(e)),k(t,e)}function A(t,e){if(!z(t))throw new TypeError;return j(e)||(e=U(e)),I(t,e)}function M(t,e,n){if(!z(e))throw new TypeError;j(n)||(n=U(n));var r=x(e,n,!1);if(j(r))return!1;if(!r.delete(t))return!1;if(r.size>0)return!0;var o=l.get(e);return o.delete(n),o.size>0||l.delete(e),!0}function w(t,e){for(var n=t.length-1;n>=0;--n){var r=(0,t[n])(e);if(!j(r)&&!F(r)){if(!W(r))throw new TypeError;e=r}}return e}function O(t,e,n,r){for(var o=t.length-1;o>=0;--o){var i=(0,t[o])(e,n,r);if(!j(i)&&!F(i)){if(!z(i))throw new TypeError;r=i}}return r}function x(t,e,n){var r=l.get(t);if(j(r)){if(!n)return;r=new c,l.set(t,r)}var o=r.get(e);if(j(o)){if(!n)return;o=new c,r.set(e,o)}return o}function C(t,e,n){if(L(t,e,n))return!0;var r=$(e);return!F(r)&&C(t,r,n)}function L(t,e,n){var r=x(e,n,!1);return!j(r)&&V(r.has(t))}function b(t,e,n){if(L(t,e,n))return P(t,e,n);var r=$(e);return F(r)?void 0:b(t,r,n)}function P(t,e,n){var r=x(e,n,!1);if(!j(r))return r.get(t)}function E(t,e,n,r){x(n,r,!0).set(t,e)}function k(t,e){var n=I(t,e),r=$(t);if(null===r)return n;var o=k(r,e);if(o.length<=0)return n;if(n.length<=0)return o;for(var i=new y,a=[],s=0,u=n;s<u.length;s++){var p=u[s];i.has(p)||(i.add(p),a.push(p))}for(var f=0,c=o;f<c.length;f++){p=c[f];i.has(p)||(i.add(p),a.push(p))}return a}function I(t,e){var n=[],r=x(t,e,!1);if(j(r))return n;for(var o=H(r.keys()),i=0;;){var a=X(o);if(!a)return n.length=i,n;var s=Q(a);try{n[i]=s}catch(t){try{Z(o)}finally{throw t}}i++}}function N(t){if(null===t)return 1;switch(typeof t){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===t?1:6;default:return 6}}function j(t){return void 0===t}function F(t){return null===t}function D(t){return"symbol"==typeof t}function z(t){return"object"==typeof t?null!==t:"function"==typeof t}function K(t,e){switch(N(t)){case 0:case 1:case 2:case 3:case 4:case 5:return t}var n=3===e?"string":5===e?"number":"default",o=q(t,r);if(void 0!==o){var i=o.call(t,n);if(z(i))throw new TypeError;return i}return R(t,"default"===n?"number":n)}function R(t,e){if("string"===e){var n=t.toString;if(J(n))if(!z(o=n.call(t)))return o;if(J(r=t.valueOf))if(!z(o=r.call(t)))return o}else{var r;if(J(r=t.valueOf))if(!z(o=r.call(t)))return o;var o,i=t.toString;if(J(i))if(!z(o=i.call(t)))return o}throw new TypeError}function V(t){return!!t}function B(t){return""+t}function U(t){var e=K(t,3);return D(e)?e:B(e)}function G(t){return Array.isArray?Array.isArray(t):t instanceof Object?t instanceof Array:"[object Array]"===Object.prototype.toString.call(t)}function J(t){return"function"==typeof t}function W(t){return"function"==typeof t}function Y(t){switch(N(t)){case 3:case 4:return!0;default:return!1}}function q(t,e){var n=t[e];if(null!=n){if(!J(n))throw new TypeError;return n}}function H(t){var e=q(t,o);if(!J(e))throw new TypeError;var n=e.call(t);if(!z(n))throw new TypeError;return n}function Q(t){return t.value}function X(t){var e=t.next();return!e.done&&e}function Z(t){var e=t.return;e&&e.call(t)}function $(t){var e=Object.getPrototypeOf(t);if("function"!=typeof t||t===p)return e;if(e!==p)return e;var n=t.prototype,r=n&&Object.getPrototypeOf(n);if(null==r||r===Object.prototype)return e;var o=r.constructor;return"function"!=typeof o||o===t?e:o}function tt(){var t={},e=[],n=function(){function t(t,e,n){this._index=0,this._keys=t,this._values=e,this._selector=n}return t.prototype["@@iterator"]=function(){return this},t.prototype[o]=function(){return this},t.prototype.next=function(){var t=this._index;if(t>=0&&t<this._keys.length){var n=this._selector(this._keys[t],this._values[t]);return t+1>=this._keys.length?(this._index=-1,this._keys=e,this._values=e):this._index++,{value:n,done:!1}}return{value:void 0,done:!0}},t.prototype.throw=function(t){throw this._index>=0&&(this._index=-1,this._keys=e,this._values=e),t},t.prototype.return=function(t){return this._index>=0&&(this._index=-1,this._keys=e,this._values=e),{value:t,done:!0}},t}();return function(){function e(){this._keys=[],this._values=[],this._cacheKey=t,this._cacheIndex=-2}return Object.defineProperty(e.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),e.prototype.has=function(t){return this._find(t,!1)>=0},e.prototype.get=function(t){var e=this._find(t,!1);return e>=0?this._values[e]:void 0},e.prototype.set=function(t,e){var n=this._find(t,!0);return this._values[n]=e,this},e.prototype.delete=function(e){var n=this._find(e,!1);if(n>=0){for(var r=this._keys.length,o=n+1;o<r;o++)this._keys[o-1]=this._keys[o],this._values[o-1]=this._values[o];return this._keys.length--,this._values.length--,e===this._cacheKey&&(this._cacheKey=t,this._cacheIndex=-2),!0}return!1},e.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=t,this._cacheIndex=-2},e.prototype.keys=function(){return new n(this._keys,this._values,r)},e.prototype.values=function(){return new n(this._keys,this._values,i)},e.prototype.entries=function(){return new n(this._keys,this._values,a)},e.prototype["@@iterator"]=function(){return this.entries()},e.prototype[o]=function(){return this.entries()},e.prototype._find=function(t,e){return this._cacheKey!==t&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=t)),this._cacheIndex<0&&e&&(this._cacheIndex=this._keys.length,this._keys.push(t),this._values.push(void 0)),this._cacheIndex},e}();function r(t,e){return t}function i(t,e){return e}function a(t,e){return[t,e]}}function et(){return function(){function t(){this._map=new c}return Object.defineProperty(t.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),t.prototype.has=function(t){return this._map.has(t)},t.prototype.add=function(t){return this._map.set(t,t),this},t.prototype.delete=function(t){return this._map.delete(t)},t.prototype.clear=function(){this._map.clear()},t.prototype.keys=function(){return this._map.keys()},t.prototype.values=function(){return this._map.values()},t.prototype.entries=function(){return this._map.entries()},t.prototype["@@iterator"]=function(){return this.keys()},t.prototype[o]=function(){return this.keys()},t}()}function nt(){var t=16,n=u.create(),r=o();return function(){function t(){this._key=o()}return t.prototype.has=function(t){var e=i(t,!1);return void 0!==e&&u.has(e,this._key)},t.prototype.get=function(t){var e=i(t,!1);return void 0!==e?u.get(e,this._key):void 0},t.prototype.set=function(t,e){return i(t,!0)[this._key]=e,this},t.prototype.delete=function(t){var e=i(t,!1);return void 0!==e&&delete e[this._key]},t.prototype.clear=function(){this._key=o()},t}();function o(){var t;do{t="@@WeakMap@@"+p()}while(u.has(n,t));return n[t]=!0,t}function i(t,n){if(!e.call(t,r)){if(!n)return;Object.defineProperty(t,r,{value:u.create()})}return t[r]}function a(t,e){for(var n=0;n<e;++n)t[n]=255*Math.random()|0;return t}function s(t){return"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(t)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(t)):a(new Uint8Array(t),t):a(new Array(t),t)}function p(){var e=s(t);e[6]=79&e[6]|64,e[8]=191&e[8]|128;for(var n="",r=0;r<t;++r){var o=e[r];4!==r&&6!==r&&8!==r||(n+="-"),o<16&&(n+="0"),n+=o.toString(16).toLowerCase()}return n}}function rt(t){return t.__=void 0,delete t.__,t}t("decorate",d),t("metadata",h),t("defineMetadata",v),t("hasMetadata",T),t("hasOwnMetadata",_),t("getMetadata",m),t("getOwnMetadata",g),t("getMetadataKeys",S),t("getOwnMetadataKeys",A),t("deleteMetadata",M)}(o)}()}(e||(e={})),t.TransformationType=void 0,(n=t.TransformationType||(t.TransformationType={}))[n.PLAIN_TO_CLASS=0]="PLAIN_TO_CLASS",n[n.CLASS_TO_PLAIN=1]="CLASS_TO_PLAIN",n[n.CLASS_TO_CLASS=2]="CLASS_TO_CLASS";var o=new(function(){function e(){this._typeMetadatas=new Map,this._transformMetadatas=new Map,this._exposeMetadatas=new Map,this._excludeMetadatas=new Map,this._ancestorsMap=new Map}return e.prototype.addTypeMetadata=function(t){this._typeMetadatas.has(t.target)||this._typeMetadatas.set(t.target,new Map),this._typeMetadatas.get(t.target).set(t.propertyName,t)},e.prototype.addTransformMetadata=function(t){this._transformMetadatas.has(t.target)||this._transformMetadatas.set(t.target,new Map),this._transformMetadatas.get(t.target).has(t.propertyName)||this._transformMetadatas.get(t.target).set(t.propertyName,[]),this._transformMetadatas.get(t.target).get(t.propertyName).push(t)},e.prototype.addExposeMetadata=function(t){this._exposeMetadatas.has(t.target)||this._exposeMetadatas.set(t.target,new Map),this._exposeMetadatas.get(t.target).set(t.propertyName,t)},e.prototype.addExcludeMetadata=function(t){this._excludeMetadatas.has(t.target)||this._excludeMetadatas.set(t.target,new Map),this._excludeMetadatas.get(t.target).set(t.propertyName,t)},e.prototype.findTransformMetadatas=function(e,n,r){return this.findMetadatas(this._transformMetadatas,e,n).filter((function(e){return!e.options||(!0===e.options.toClassOnly&&!0===e.options.toPlainOnly||(!0===e.options.toClassOnly?r===t.TransformationType.CLASS_TO_CLASS||r===t.TransformationType.PLAIN_TO_CLASS:!0!==e.options.toPlainOnly||r===t.TransformationType.CLASS_TO_PLAIN))}))},e.prototype.findExcludeMetadata=function(t,e){return this.findMetadata(this._excludeMetadatas,t,e)},e.prototype.findExposeMetadata=function(t,e){return this.findMetadata(this._exposeMetadatas,t,e)},e.prototype.findExposeMetadataByCustomName=function(t,e){return this.getExposedMetadatas(t).find((function(t){return t.options&&t.options.name===e}))},e.prototype.findTypeMetadata=function(t,e){return this.findMetadata(this._typeMetadatas,t,e)},e.prototype.getStrategy=function(t){var e=this._excludeMetadatas.get(t),n=e&&e.get(void 0),r=this._exposeMetadatas.get(t),o=r&&r.get(void 0);return n&&o||!n&&!o?"none":n?"excludeAll":"exposeAll"},e.prototype.getExposedMetadatas=function(t){return this.getMetadata(this._exposeMetadatas,t)},e.prototype.getExcludedMetadatas=function(t){return this.getMetadata(this._excludeMetadatas,t)},e.prototype.getExposedProperties=function(e,n){return this.getExposedMetadatas(e).filter((function(e){return!e.options||(!0===e.options.toClassOnly&&!0===e.options.toPlainOnly||(!0===e.options.toClassOnly?n===t.TransformationType.CLASS_TO_CLASS||n===t.TransformationType.PLAIN_TO_CLASS:!0!==e.options.toPlainOnly||n===t.TransformationType.CLASS_TO_PLAIN))})).map((function(t){return t.propertyName}))},e.prototype.getExcludedProperties=function(e,n){return this.getExcludedMetadatas(e).filter((function(e){return!e.options||(!0===e.options.toClassOnly&&!0===e.options.toPlainOnly||(!0===e.options.toClassOnly?n===t.TransformationType.CLASS_TO_CLASS||n===t.TransformationType.PLAIN_TO_CLASS:!0!==e.options.toPlainOnly||n===t.TransformationType.CLASS_TO_PLAIN))})).map((function(t){return t.propertyName}))},e.prototype.clear=function(){this._typeMetadatas.clear(),this._exposeMetadatas.clear(),this._excludeMetadatas.clear(),this._ancestorsMap.clear()},e.prototype.getMetadata=function(t,e){var n,r=t.get(e);r&&(n=Array.from(r.values()).filter((function(t){return void 0!==t.propertyName})));for(var o=[],i=0,a=this.getAncestors(e);i<a.length;i++){var s=a[i],u=t.get(s);if(u){var p=Array.from(u.values()).filter((function(t){return void 0!==t.propertyName}));o.push.apply(o,p)}}return o.concat(n||[])},e.prototype.findMetadata=function(t,e,n){var r=t.get(e);if(r){var o=r.get(n);if(o)return o}for(var i=0,a=this.getAncestors(e);i<a.length;i++){var s=a[i],u=t.get(s);if(u){var p=u.get(n);if(p)return p}}},e.prototype.findMetadatas=function(t,e,n){var r,o=t.get(e);o&&(r=o.get(n));for(var i=[],a=0,s=this.getAncestors(e);a<s.length;a++){var u=s[a],p=t.get(u);p&&p.has(n)&&i.push.apply(i,p.get(n))}return i.slice().reverse().concat((r||[]).slice().reverse())},e.prototype.getAncestors=function(t){if(!t)return[];if(!this._ancestorsMap.has(t)){for(var e=[],n=Object.getPrototypeOf(t.prototype.constructor);void 0!==n.prototype;n=Object.getPrototypeOf(n.prototype.constructor))e.push(n);this._ancestorsMap.set(t,e)}return this._ancestorsMap.get(t)},e}());var i=function(t,e){for(var n=0,r=e.length,o=t.length;n<r;n++,o++)t[o]=e[n];return t};var a=function(){function e(t,e){this.transformationType=t,this.options=e,this.recursionStack=new Set}return e.prototype.transform=function(e,n,r,i,a,s){var u,p=this;if(void 0===s&&(s=0),Array.isArray(n)||n instanceof Set){var f=i&&this.transformationType===t.TransformationType.PLAIN_TO_CLASS?function(t){var e=new t;return e instanceof Set||"push"in e?e:[]}(i):[];return n.forEach((function(n,o){var i=e?e[o]:void 0;if(p.options.enableCircularCheck&&p.isCircular(n))p.transformationType===t.TransformationType.CLASS_TO_CLASS&&(f instanceof Set?f.add(n):f.push(n));else{var a=void 0;if("function"!=typeof r&&r&&r.options&&r.options.discriminator&&r.options.discriminator.property&&r.options.discriminator.subTypes){if(p.transformationType===t.TransformationType.PLAIN_TO_CLASS){a=r.options.discriminator.subTypes.find((function(t){return t.name===n[r.options.discriminator.property]}));var u={newObject:f,object:n,property:void 0},c=r.typeFunction(u);a=void 0===a?c:a.value,r.options.keepDiscriminatorProperty||delete n[r.options.discriminator.property]}p.transformationType===t.TransformationType.CLASS_TO_CLASS&&(a=n.constructor),p.transformationType===t.TransformationType.CLASS_TO_PLAIN&&(n[r.options.discriminator.property]=r.options.discriminator.subTypes.find((function(t){return t.value===n.constructor})).name)}else a=r;var y=p.transform(i,n,a,void 0,n instanceof Map,s+1);f instanceof Set?f.add(y):f.push(y)}})),f}if(r!==String||a){if(r!==Number||a){if(r!==Boolean||a){if((r===Date||n instanceof Date)&&!a)return n instanceof Date?new Date(n.valueOf()):null==n?n:new Date(n);if(("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:void 0).Buffer&&(r===Buffer||n instanceof Buffer)&&!a)return null==n?n:Buffer.from(n);if(null===(u=n)||"object"!=typeof u||"function"!=typeof u.then||a){if(a||null===n||"object"!=typeof n||"function"!=typeof n.then){if("object"==typeof n&&null!==n){r||n.constructor===Object||(r=n.constructor),!r&&e&&(r=e.constructor),this.options.enableCircularCheck&&this.recursionStack.add(n);var c=this.getKeys(r,n,a),y=e||{};e||this.transformationType!==t.TransformationType.PLAIN_TO_CLASS&&this.transformationType!==t.TransformationType.CLASS_TO_CLASS||(y=a?new Map:r?new r:{});for(var l=function(i){if("__proto__"===i||"constructor"===i)return"continue";var u=i,p=i,f=i;if(!d.options.ignoreDecorators&&r)if(d.transformationType===t.TransformationType.PLAIN_TO_CLASS)(c=o.findExposeMetadataByCustomName(r,i))&&(f=c.propertyName,p=c.propertyName);else if(d.transformationType===t.TransformationType.CLASS_TO_PLAIN||d.transformationType===t.TransformationType.CLASS_TO_CLASS){var c;(c=o.findExposeMetadata(r,i))&&c.options&&c.options.name&&(p=c.options.name)}var l=void 0;l=d.transformationType===t.TransformationType.PLAIN_TO_CLASS?n[u]:n instanceof Map?n.get(u):n[u]instanceof Function?n[u]():n[u];var h=void 0,v=l instanceof Map;if(r&&a)h=r;else if(r){var T=o.findTypeMetadata(r,f);if(T){var _={newObject:y,object:n,property:f},m=T.typeFunction?T.typeFunction(_):T.reflectedType;T.options&&T.options.discriminator&&T.options.discriminator.property&&T.options.discriminator.subTypes?n[u]instanceof Array?h=T:(d.transformationType===t.TransformationType.PLAIN_TO_CLASS&&(h=void 0===(h=T.options.discriminator.subTypes.find((function(t){if(l&&l instanceof Object&&T.options.discriminator.property in l)return t.name===l[T.options.discriminator.property]})))?m:h.value,T.options.keepDiscriminatorProperty||l&&l instanceof Object&&T.options.discriminator.property in l&&delete l[T.options.discriminator.property]),d.transformationType===t.TransformationType.CLASS_TO_CLASS&&(h=l.constructor),d.transformationType===t.TransformationType.CLASS_TO_PLAIN&&l&&(l[T.options.discriminator.property]=T.options.discriminator.subTypes.find((function(t){return t.value===l.constructor})).name)):h=m,v=v||T.reflectedType===Map}else if(d.options.targetMaps)d.options.targetMaps.filter((function(t){return t.target===r&&!!t.properties[f]})).forEach((function(t){return h=t.properties[f]}));else if(d.options.enableImplicitConversion&&d.transformationType===t.TransformationType.PLAIN_TO_CLASS){var g=Reflect.getMetadata("design:type",r.prototype,f);g&&(h=g)}}var S=Array.isArray(n[u])?d.getReflectedType(r,f):void 0,A=e?e[u]:void 0;if(y.constructor.prototype){var M=Object.getOwnPropertyDescriptor(y.constructor.prototype,p);if((d.transformationType===t.TransformationType.PLAIN_TO_CLASS||d.transformationType===t.TransformationType.CLASS_TO_CLASS)&&(M&&!M.set||y[p]instanceof Function))return"continue"}if(d.options.enableCircularCheck&&d.isCircular(l)){if(d.transformationType===t.TransformationType.CLASS_TO_CLASS){O=l;(void 0!==(O=d.applyCustomTransformations(O,r,i,n,d.transformationType))||d.options.exposeUnsetFields)&&(y instanceof Map?y.set(p,O):y[p]=O)}}else{var w=d.transformationType===t.TransformationType.PLAIN_TO_CLASS?p:i,O=void 0;d.transformationType===t.TransformationType.CLASS_TO_PLAIN?(O=n[w],O=d.applyCustomTransformations(O,r,w,n,d.transformationType),O=n[w]===O?l:O,O=d.transform(A,O,h,S,v,s+1)):void 0===l&&d.options.exposeDefaultValues?O=y[p]:(O=d.transform(A,l,h,S,v,s+1),O=d.applyCustomTransformations(O,r,w,n,d.transformationType)),(void 0!==O||d.options.exposeUnsetFields)&&(y instanceof Map?y.set(p,O):y[p]=O)}},d=this,h=0,v=c;h<v.length;h++){l(v[h])}return this.options.enableCircularCheck&&this.recursionStack.delete(n),y}return n}return n}return new Promise((function(t,e){n.then((function(e){return t(p.transform(void 0,e,r,void 0,void 0,s+1))}),e)}))}return null==n?n:Boolean(n)}return null==n?n:Number(n)}return null==n?n:String(n)},e.prototype.applyCustomTransformations=function(t,e,n,r,i){var a=this,s=o.findTransformMetadatas(e,n,this.transformationType);return void 0!==this.options.version&&(s=s.filter((function(t){return!t.options||a.checkVersion(t.options.since,t.options.until)}))),(s=this.options.groups&&this.options.groups.length?s.filter((function(t){return!t.options||a.checkGroups(t.options.groups)})):s.filter((function(t){return!t.options||!t.options.groups||!t.options.groups.length}))).forEach((function(e){t=e.transformFn({value:t,key:n,obj:r,type:i,options:a.options})})),t},e.prototype.isCircular=function(t){return this.recursionStack.has(t)},e.prototype.getReflectedType=function(t,e){if(t){var n=o.findTypeMetadata(t,e);return n?n.reflectedType:void 0}},e.prototype.getKeys=function(e,n,r){var a=this,s=o.getStrategy(e);"none"===s&&(s=this.options.strategy||"exposeAll");var u=[];if(("exposeAll"===s||r)&&(u=n instanceof Map?Array.from(n.keys()):Object.keys(n)),r)return u;if(this.options.ignoreDecorators&&this.options.excludeExtraneousValues&&e){var p=o.getExposedProperties(e,this.transformationType),f=o.getExcludedProperties(e,this.transformationType);u=i(i([],p),f)}if(!this.options.ignoreDecorators&&e){p=o.getExposedProperties(e,this.transformationType);this.transformationType===t.TransformationType.PLAIN_TO_CLASS&&(p=p.map((function(t){var n=o.findExposeMetadata(e,t);return n&&n.options&&n.options.name?n.options.name:t}))),u=this.options.excludeExtraneousValues?p:u.concat(p);var c=o.getExcludedProperties(e,this.transformationType);c.length>0&&(u=u.filter((function(t){return!c.includes(t)}))),void 0!==this.options.version&&(u=u.filter((function(t){var n=o.findExposeMetadata(e,t);return!n||!n.options||a.checkVersion(n.options.since,n.options.until)}))),u=this.options.groups&&this.options.groups.length?u.filter((function(t){var n=o.findExposeMetadata(e,t);return!n||!n.options||a.checkGroups(n.options.groups)})):u.filter((function(t){var n=o.findExposeMetadata(e,t);return!(n&&n.options&&n.options.groups&&n.options.groups.length)}))}return this.options.excludePrefixes&&this.options.excludePrefixes.length&&(u=u.filter((function(t){return a.options.excludePrefixes.every((function(e){return t.substr(0,e.length)!==e}))}))),u=u.filter((function(t,e,n){return n.indexOf(t)===e}))},e.prototype.checkVersion=function(t,e){var n=!0;return n&&t&&(n=this.options.version>=t),n&&e&&(n=this.options.version<e),n},e.prototype.checkGroups=function(t){return!t||this.options.groups.some((function(e){return t.includes(e)}))},e}(),s={enableCircularCheck:!1,enableImplicitConversion:!1,excludeExtraneousValues:!1,excludePrefixes:void 0,exposeDefaultValues:!1,exposeUnsetFields:!0,groups:void 0,ignoreDecorators:!1,strategy:void 0,targetMaps:void 0,version:void 0},u=function(){return(u=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},p=function(){function e(){}return e.prototype.instanceToPlain=function(e,n){return new a(t.TransformationType.CLASS_TO_PLAIN,u(u({},s),n)).transform(void 0,e,void 0,void 0,void 0,void 0)},e.prototype.classToPlainFromExist=function(e,n,r){return new a(t.TransformationType.CLASS_TO_PLAIN,u(u({},s),r)).transform(n,e,void 0,void 0,void 0,void 0)},e.prototype.plainToInstance=function(e,n,r){return new a(t.TransformationType.PLAIN_TO_CLASS,u(u({},s),r)).transform(void 0,n,e,void 0,void 0,void 0)},e.prototype.plainToClassFromExist=function(e,n,r){return new a(t.TransformationType.PLAIN_TO_CLASS,u(u({},s),r)).transform(e,n,void 0,void 0,void 0,void 0)},e.prototype.instanceToInstance=function(e,n){return new a(t.TransformationType.CLASS_TO_CLASS,u(u({},s),n)).transform(void 0,e,void 0,void 0,void 0,void 0)},e.prototype.classToClassFromExist=function(e,n,r){return new a(t.TransformationType.CLASS_TO_CLASS,u(u({},s),r)).transform(n,e,void 0,void 0,void 0,void 0)},e.prototype.serialize=function(t,e){return JSON.stringify(this.instanceToPlain(t,e))},e.prototype.deserialize=function(t,e,n){var r=JSON.parse(e);return this.plainToInstance(t,r,n)},e.prototype.deserializeArray=function(t,e,n){var r=JSON.parse(e);return this.plainToInstance(t,r,n)},e}();var f=new p;t.ClassTransformer=p,t.Exclude=function(t){return void 0===t&&(t={}),function(e,n){o.addExcludeMetadata({target:e instanceof Function?e:e.constructor,propertyName:n,options:t})}},t.Expose=function(t){return void 0===t&&(t={}),function(e,n){o.addExposeMetadata({target:e instanceof Function?e:e.constructor,propertyName:n,options:t})}},t.Transform=function(t,e){return void 0===e&&(e={}),function(n,r){o.addTransformMetadata({target:n.constructor,propertyName:r,transformFn:t,options:e})}},t.TransformInstanceToInstance=function(t){return function(e,n,r){var o=new p,i=r.value;r.value=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=i.apply(this,e),a=!!r&&("object"==typeof r||"function"==typeof r)&&"function"==typeof r.then;return a?r.then((function(e){return o.instanceToInstance(e,t)})):o.instanceToInstance(r,t)}}},t.TransformInstanceToPlain=function(t){return function(e,n,r){var o=new p,i=r.value;r.value=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=i.apply(this,e),a=!!r&&("object"==typeof r||"function"==typeof r)&&"function"==typeof r.then;return a?r.then((function(e){return o.instanceToPlain(e,t)})):o.instanceToPlain(r,t)}}},t.TransformPlainToInstance=function(t,e){return function(n,r,o){var i=new p,a=o.value;o.value=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=a.apply(this,n),s=!!o&&("object"==typeof o||"function"==typeof o)&&"function"==typeof o.then;return s?o.then((function(n){return i.plainToInstance(t,n,e)})):i.plainToInstance(t,o,e)}}},t.Type=function(t,e){return void 0===e&&(e={}),function(n,r){var i=Reflect.getMetadata("design:type",n,r);o.addTypeMetadata({target:n.constructor,propertyName:r,reflectedType:i,typeFunction:t,options:e})}},t.classToClassFromExist=function(t,e,n){return f.classToClassFromExist(t,e,n)},t.classToPlainFromExist=function(t,e,n){return f.classToPlainFromExist(t,e,n)},t.deserialize=function(t,e,n){return f.deserialize(t,e,n)},t.deserializeArray=function(t,e,n){return f.deserializeArray(t,e,n)},t.instanceToInstance=function(t,e){return f.instanceToInstance(t,e)},t.instanceToPlain=function(t,e){return f.instanceToPlain(t,e)},t.plainToClassFromExist=function(t,e,n){return f.plainToClassFromExist(t,e,n)},t.plainToInstance=function(t,e,n){return f.plainToInstance(t,e,n)},t.serialize=function(t,e){return f.serialize(t,e)},Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=class-transformer.umd.min.js.map
